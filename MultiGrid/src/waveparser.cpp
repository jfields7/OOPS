#include <waveparser.h>
#include <iostream>

using namespace std;

// DO NOT MODIFY - This file is automatically generated during compilation.

bool WaveParser::updateParameters(string fname, Parameters* params){
  if(!checkId(params)){
    return false;
  }
  reader.clearData();
  ParamReader::ParamResult result = reader.readFile(fname);
  if(result != ParamReader::SUCCESS){
    cout << "An error occurred while trying to read " << fname << ".\n";
    return false;
  }
  WaveParameters *pars = (WaveParameters*) params;

  if(!reader.hasSection(string("Wave"))){
    return true;
  }

  if(reader.hasParameter(string("Wave"),string("InitialConditions"))){
    string result = reader.readAsString(string("Wave"),string("InitialConditions"));
    if(result.compare("GAUSSIAN") == 0){
      pars->setInitialConditions(WaveParameters::GAUSSIAN);
    }
    else if(result.compare("FLAT") == 0){
      pars->setInitialConditions(WaveParameters::FLAT);
    }
    else {
      cout << "The value for parameter InitialConditions is out of range.\n";
    }
  }

  if(reader.hasParameter(string("Wave"),string("KOSigma"))){
    double result = reader.readAsDouble(string("Wave"),string("KOSigma"));
    if(result <= 1.000000e+00 && result >= 0.000000e+00){
      pars->setKOSigma(result);
    }
    else{
      cout << "Parameter KOSigma out of range.\n";
    }
  }

  if(reader.hasParameter(string("Wave"),string("GaussianAmplitude"))){
    double result = reader.readAsDouble(string("Wave"),string("GaussianAmplitude"));
    if(result <= 1.000000e+01 && result >= 0.000000e+00){
      pars->setGaussianAmplitude(result);
    }
    else{
      cout << "Parameter GaussianAmplitude out of range.\n";
    }
  }

  return true;
}

